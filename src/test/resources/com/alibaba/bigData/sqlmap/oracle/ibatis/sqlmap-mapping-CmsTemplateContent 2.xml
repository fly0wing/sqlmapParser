<?xml version='1.0' encoding="gb2312"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- WARNING: This is an autogenerated file -->

<sqlMap namespace="cms_CmsTemplateContent">        
        
    <resultMap class="CmsTemplateContent" id="CmsTemplateContent-result" >
        <result property="gmtCreate"		javaType="java.sql.Timestamp"	column="GMT_CREATE" />
        <result property="gmtModified"		javaType="java.sql.Timestamp"	column="GMT_MODIFIED" />
        <result property="templateId"		javaType="java.lang.Long"		column="TEMPLATE_ID" />
        <result property="templateContent"	javaType="java.lang.String"		column="TEMPLATE_CONTENT" />
    </resultMap>
    
    <resultMap class="hashMap" id="CmsTemplateContent-map" >
        <result property="code"		javaType="java.lang.String"	    column="CODE" />
        <result property="content"	javaType="java.lang.String"		column="CONTENT" />
    </resultMap>

    <select id="MS-SELECT-CMSTEMPLATECONTENT-BY-ID" parameterClass="java.util.Map" resultMap="CmsTemplateContent-result" >
        <![CDATA[
            select * from CMS_TEMPLATE_CONTENT where TEMPLATE_ID = #templateId#
        ]]>
    </select>
    
    <select id="MS-SELECT-CMSTEMPLATECONTENT-BY-IDS"  resultMap="CmsTemplateContent-result" parameterClass="java.util.Map">
              SELECT * FROM CMS_TEMPLATE_CONTENT
				<iterate prepend="WHERE" property="IdList" open="(" close=")" conjunction="OR">
		                      TEMPLATE_ID =#IdList[]#
		        </iterate>
			   ORDER BY GMT_CREATE DESC
    </select>

    <update id="updateCmsTemplateContent" parameterClass="CmsTemplateContent" >
        <![CDATA[
            update
                    CMS_TEMPLATE_CONTENT
            set                    
                    GMT_MODIFIED = sysdate , 
                    TEMPLATE_CONTENT = #templateContent#     
            where  
                TEMPLATE_ID = #templateId#
        ]]>
    </update>

    <insert id="MS-INSERTCMSTEMPLATECONTENT" parameterClass="CmsTemplateContent" >
		<![CDATA[
            INSERT INTO CMS_TEMPLATE_CONTENT
              (GMT_CREATE  , GMT_MODIFIED  , TEMPLATE_ID  , TEMPLATE_CONTENT )
            values
              (sysdate  , sysdate  , #templateId#  , #templateContent# )
        ]]>
    </insert>

    <delete id="deleteCmsTemplateContent" parameterClass="CmsTemplateContent"  >
        <![CDATA[
            delete from CMS_TEMPLATE_CONTENT where TEMPLATE_ID = #templateId# 
        ]]>
    </delete>
    
     <select id="MS-SELECT-ONLINECMSTEMPLATECONTENT-BY-VERSIONID" parameterClass="java.util.Map" resultClass="java.lang.String" >
        <![CDATA[
            SELECT  template_content from online_tpl_content where version_id=#versionID#
        ]]>
    </select>
    
    <select id="MS-SELECT-CMSTEMPLATECONTENT-BY-CODES" parameterClass="Collection" resultMap="CmsTemplateContent-map">
        <![CDATA[
        	SELECT 
        	      T.CODE AS code,
        	      C.TEMPLATE_CONTENT AS content
        	from 
        	      cms.CMS_TEMPLATE T ,cms.CMS_TEMPLATE_CONTENT C 
        	where 
        	      C.TEMPLATE_ID=T.ID and T.CODE in
        ]]>
        <iterate open="(" close=")" conjunction=",">
			#[]#
		</iterate>
   </select>

</sqlMap>
