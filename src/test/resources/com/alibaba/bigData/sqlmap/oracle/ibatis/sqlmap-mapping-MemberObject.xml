<?xml version='1.0' encoding="gb2312"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

	<!-- WARNING: This is an autogenerated file -->

<sqlMap namespace="dcms.memberobject">

	<resultMap id="MemberObject-result" class="MemberObject">
		<result property="id" 		javaType="java.lang.Long" 	column="ID" />
		<result property="value" 	javaType="java.lang.String" column="OBJECT_VALUE" />
		<result property="type" 	javaType="java.lang.String" column="OBJECT_TYPE" />
		<result property="gmtCreate" 	javaType="java.sql.Timestamp" column="GMT_CREATE" />
		<result property="gmtModified" 	javaType="java.sql.Timestamp" column="GMT_MODIFIED" />
	</resultMap>

	<select id="getMemberObjectById" resultClass="MemberObject"
		parameterClass="java.lang.Long" resultMap="MemberObject-result">
		SELECT ID,OBJECT_VALUE,OBJECT_TYPE,GMT_CREATE,GMT_MODIFIED FROM
		DCMS_MEMBER_OBJECT WHERE ID=#ID#
    </select>
    
    <select id="getMemberObjects" resultMap="MemberObject-result">
		SELECT
		ID,OBJECT_VALUE,OBJECT_TYPE,GMT_CREATE,GMT_MODIFIED
        FROM  
        DCMS_MEMBER_OBJECT
        WHERE  ID in
		<iterate  property="ids" open="(" close=")" conjunction=",">
			#ids[]#
		</iterate>
    </select>
    
	<insert id="createMemberObject" parameterClass="MemberObject">
		<selectKey resultClass="java.lang.Long" keyProperty="id">
			SELECT SEQ_DCMS_MEMBER_OBJECT.NEXTVAL AS id FROM DUAL
		</selectKey>
		insert into DCMS_MEMBER_OBJECT(ID,OBJECT_VALUE,OBJECT_TYPE,GMT_CREATE,GMT_MODIFIED) 
								values(#id#,#value#,#type#,SYSDATE,SYSDATE)
	</insert>
	
	<update id="updateMemberObject" parameterClass="MemberObject">
		UPDATE DCMS_MEMBER_OBJECT SET GMT_MODIFIED = SYSDATE
			 <isNotNull prepend="," property="value" >
			 	OBJECT_VALUE = #value#
			 </isNotNull>
		     <isNotNull prepend="," property="type" >
		        OBJECT_TYPE = #type#
		     </isNotNull>
		 WHERE ID=#id#
	</update>
</sqlMap>
