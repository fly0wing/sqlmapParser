<?xml version='1.0' encoding="gb2312"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- WARNING: This is an autogenerated file -->

<sqlMap namespace="cms_MaterialLibResource">
	<typeAlias alias="MaterialLibResource" type="com.alibaba.china.cmshollywood.cms.dal.dataobject.MaterialLibResource"/>

    <resultMap class="MaterialLibResource" id="MaterialLibResource-result" >
        <result property="gmtCreate"	javaType="java.sql.Timestamp"	column="GMT_CREATE" />
        <result property="gmtModified"	javaType="java.sql.Timestamp"	column="GMT_MODIFIED" />
        <result property="id"			javaType="java.lang.Long"		column="ID" />
        <result property="mid"			javaType="java.lang.Long"		column="MATERIAL_LIB_ID" />
		<result property="rid"      javaType="java.lang.Long"     column="RESOURCE_ID"/>
		<result property="resourceType"      javaType="java.lang.String"     column="RESOURCE_TYPE"/>
		<result property="userId"      javaType="java.lang.String"     column="USER_ID"/>
    </resultMap>

    <delete id="deleteMaterialLibResource" parameterClass="map"  >
        <![CDATA[
            delete from CMS_MATERIAL_LIB_RESOURCE where RESOURCE_ID = #rid# and  RESOURCE_TYPE= #resourceType#
        ]]>
    </delete>

     <delete id="deleteMaterialLibResourceBymateriallibid" parameterClass="map"  >
        <![CDATA[
            delete from CMS_MATERIAL_LIB_RESOURCE where material_lib_id = #rid# and  RESOURCE_TYPE= #resourceType#
        ]]>
    </delete>


	<insert id="addMaterialLibResource" parameterClass="MaterialLibResource">
		<selectKey resultClass="java.lang.Long" keyProperty="id">
			SELECT SEQ_CMS_MATERIAL_LIB_RESOURCE.NEXTVAL AS ID FROM DUAL
		</selectKey>
		<![CDATA[
			INSERT INTO CMS_MATERIAL_LIB_RESOURCE
				(GMT_CREATE , GMT_MODIFIED , ID , MATERIAL_LIB_ID  , RESOURCE_ID, RESOURCE_TYPE, USER_ID )
			values
				(SYSDATE , SYSDATE , #id# , #mid# , #rid# , #resourceType#,  #userId#)
		]]>
	</insert>

	 <select id="getMaterialLibResourceCount" parameterClass="java.util.Map"
		resultClass="int">
        <![CDATA[
	      	SELECT count(*) FROM CMS_MATERIAL_LIB_RESOURCE where MATERIAL_LIB_ID = #mid#
	      ]]>
	</select>

	 <select id="getMaterialLibResourceByResource" parameterClass="java.util.Map" resultMap="MaterialLibResource-result" resultClass="MaterialLibResource">
        <![CDATA[
	      	SELECT GMT_CREATE , GMT_MODIFIED , ID , MATERIAL_LIB_ID, RESOURCE_ID, RESOURCE_TYPE, USER_ID  FROM CMS_MATERIAL_LIB_RESOURCE where RESOURCE_TYPE = #resourceType# and RESOURCE_ID=#rid#
	      ]]>
	</select>
</sqlMap>
