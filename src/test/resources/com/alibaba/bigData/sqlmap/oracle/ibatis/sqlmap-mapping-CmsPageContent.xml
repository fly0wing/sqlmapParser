<?xml version='1.0' encoding="gb2312"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- WARNING: This is an autogenerated file -->

<sqlMap namespace="cms_CmsPageContent">        
        
    <resultMap class="CmsPageContent" id="CmsPageContent-result" >
        <result property="gmtCreate"			javaType="java.sql.Timestamp"		column="GMT_CREATE" />
        <result	property="gmtModified"			javaType="java.sql.Timestamp"		column="GMT_MODIFIED" />
        <result	property="pageId"				javaType="java.lang.Long"			column="PAGE_ID" />
        <result property="pageContent"			javaType="java.lang.String"			column="PAGE_CONTENT" />
    </resultMap>
    
    <insert id="MS_INSERT"  parameterClass="CmsPageContent" >
        <![CDATA[
            insert into CMS_PAGE_CONTENT
              (GMT_CREATE  , GMT_MODIFIED  , PAGE_ID  , PAGE_CONTENT )
            values
              (SYSDATE  , SYSDATE  , #pageId#  , #pageContent# )
        ]]>
    </insert>
    <insert id="MS_INSERT2"  parameterClass="CmsPageContent" >
        <![CDATA[
            insert into CMS_PAGE_CONTENT
              (GMT_CREATE  , GMT_MODIFIED  , PAGE_ID  , PAGE_CONTENT )
            values
              (#gmtCreate#  , #gmtCreate#  , #pageId#  , #pageContent# )
        ]]>
    </insert>

    <select id="MS_SELECT_BY_PRIMARYKEY" parameterClass="java.lang.Long" resultMap="CmsPageContent-result" >
        <![CDATA[
            SELECT *  FROM  CMS_PAGE_CONTENT WHERE PAGE_ID = #value#
        ]]>
    </select>
    
    <select id="MS_SELECT_PAGECONTENT_LIST" parameterClass="map" resultMap="CmsPageContent-result" >
        <![CDATA[
            SELECT PAGE_ID, PAGE_CONTENT, GMT_CREATE, GMT_MODIFIED FROM (
				SELECT A.PAGE_ID, A.PAGE_CONTENT, A.GMT_CREATE, A.GMT_MODIFIED, ROWNUM RN FROM  CMS_PAGE_CONTENT A WHERE ROWNUM <= #offset# + #count#
			)
			WHERE RN > #offset#
        ]]>
    </select>
    
    <update id="MS_UPDATE_BY_PRIMARYKEY_SELECTIVE" parameterClass="CmsPageContent" >
    	update CMS_PAGE_CONTENT set
    		 GMT_MODIFIED = sysdate
		     <isNotNull prepend="," property="pageContent" >
		        PAGE_CONTENT = #pageContent#
		     </isNotNull>
		where PAGE_ID = #pageId#
    </update> 
    
    <select id="MS_SELECT_BY_IDS" parameterClass="java.util.Map" resultMap="CmsPageContent-result" >
        <![CDATA[
            SELECT *  FROM  CMS_PAGE_CONTENT WHERE PAGE_ID in 
        ]]>
        <iterate property="pageIds" open="(" close=")" conjunction=",">
			#pageIds[]#
		</iterate>
    </select>
    <delete id="deleteCmsPageContent" parameterClass="java.lang.Long"  >
        <![CDATA[
            delete FROM CMS_PAGE_CONTENT WHERE PAGE_ID = #value# 
        ]]>
    </delete>

	<select id="MS_ITERATE_CmsPageContent"  resultMap="CmsPageContent-result" parameterClass="java.util.Map">
        <![CDATA[
			SELECT * FROM (
				SELECT page.*, ROWNUM rn FROM (
		            SELECT * FROM CMS_PAGE_CONTENT 
		]]>		
	    ORDER BY GMT_MODIFIED DESC
		<![CDATA[
			    ) page WHERE ROWNUM <#offset# + #length#
		    ) WHERE rn >= #offset#
		]]>
    </select>   
</sqlMap>
