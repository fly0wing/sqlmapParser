<?xml version='1.0' encoding="gb2312"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- WARNING: This is an autogenerated file -->

<sqlMap namespace="cms_PageAttribute">        
        
    <resultMap class="CmsPageAttribute" id="CmsPageAttribute-result" >
        <result property="gmtCreate"	javaType="java.sql.Timestamp"	column="GMT_CREATE" />
        <result property="gmtModified"	javaType="java.sql.Timestamp"	column="GMT_MODIFIED" />
        <result property="id"			javaType="java.lang.Long"		column="ID" />
        <result property="pageId"	    javaType="java.lang.Long"		column="PAGE_ID" />
        <result property="attribName"   javaType="java.lang.String"		column="ATTRIB_NAME" />
        <result property="attribValue"	javaType="java.lang.String"		column="ATTRIB_VALUE" />
    </resultMap>     

    <insert id="MS-INSERT-CMSPAGEATTRIBUTE" parameterClass="CmsPageAttribute" >
         <selectKey resultClass="java.lang.Long" keyProperty="id">
            SELECT SEQ_CMS_PAGE_ATTRIBUTES.NEXTVAL AS id FROM DUAL
        </selectKey>
		<![CDATA[
            insert into CMS_PAGE_ATTRIBUTES
              (GMT_CREATE  , GMT_MODIFIED  , ID  , PAGE_ID  , ATTRIB_NAME  , ATTRIB_VALUE)
            values
              (SYSDATE  , SYSDATE  , #id#  , #pageId#  , #attribName#  , #attribValue#)
        ]]>
    </insert>

    <delete id="MS-DELETE-CMSPAGEATTRIBUTE">
        <![CDATA[
            delete from CMS_PAGE_ATTRIBUTES where PAGE_ID = #pageId# and ATTRIB_NAME = #attribName#
        ]]>
    </delete>	

    <select id="MS-SELECT-CMSPAGEATTRIB-BY-NAME" resultMap="CmsPageAttribute-result">
            SELECT *
            FROM CMS_PAGE_ATTRIBUTES WHERE PAGE_ID = #pageId# and ATTRIB_NAME = #attribName#
    </select> 	

    <select id="MS-SELECT-CMSPAGEATTRIBS" resultMap="CmsPageAttribute-result">
            SELECT *
            FROM CMS_PAGE_ATTRIBUTES WHERE PAGE_ID = #pageId#
    </select>   
    
	<update id="MS-UPDATE-CMSPAGEATTRIB" parameterClass="CmsPageAttribute" >
        <![CDATA[
            UPDATE CMS_PAGE_ATTRIBUTES
            SET
                    GMT_MODIFIED = SYSDATE, 
                    PAGE_ID = #pageId#,
                    ATTRIB_NAME = #attribName# ,
                    ATTRIB_VALUE = #attribValue#       
            WHERE  
                  PAGE_ID = #pageId# and ATTRIB_NAME = #attribName#
        ]]>
    </update>    
	
</sqlMap>
